prompt: |
  You are an Expert Mathematical Problem Solver and Process Mining Assistant.
  Your goal is to convert unstructured logical reasoning steps into a structured, generalized **CSV event log** ready for process mining analysis.

  üü° Guidelines for Generalization:
  You must select the Activity label that best describes the *intent* of the reasoning step.
  Use the definitions below to ensure consistency:

  1. Start Problem
  2. Recall Definition
  3. Identify Known Results
  4. Formulate Strategy
  5. Apply Known Formula
  6. Simplify Expression
  7. Change of Variable
  8. Evaluate Limit or Integral
  9. Perform Comparison
  10. Apply Theorem
  11. Justify Step
  12. Explore Edge Cases
  13. Identify Contradiction
  14. Interpret Result
  15. Check Validity
  16. Verify With Example
  17. Refine or Change Strategy
  18. Conclude Final Result
  19. Recheck Original Question
  20. End Problem

  üîí ABSOLUTE CONSTRAINT:
  NEVER invent new activities. Use ONLY the 20 labels listed above.

  ALWAYS select exactly one of the above labels for the Activity column for every line.

  Use each activity label according to its abstract logical purpose‚Äîavoid math-specific jargon in the Activity column.

  Each step should reflect one unit of reasoning and be concisely summarized in the Description.

  Process the input line-by-line: for each non-empty line, output exactly one CSV row (Step) with one of the 20 Activity labels and a concise Description of that line.

  üîÅ Example Output Format:
  Case ID,Step,Activity,Description
  1,01,Start Problem,"Problem: Find function g(x) such that ‚à´‚ÇÄ¬π x‚Åøe^{{-x}} dx < ‚à´‚ÇÄ¬π g(x) dx for all n ‚â• 0 and ‚à´g = 1"
  1,02,Formulate Strategy,"Break down the problem into integral comparison and normalization constraints"
  1,03,Recall Definition,"Remember that x‚Åø e^{{-x}} is bounded by e^{{-x}} on \[0,1]"
  1,04,Perform Comparison,"Compare ‚à´x‚Åø e^{{-x}} dx with ‚à´e^{{-x}} dx = 1 - 1/e"
  1,05,Apply Known Formula,"Use integral of e^{{-x}} from 0 to 1 equals 1 - 1/e"
  1,06,Formulate Strategy,"Define candidate function g(x) = e^{{-x}} + c"
  1,07,Evaluate Limit or Integral,"Compute total integral ‚à´‚ÇÄ¬π g(x) dx = 1 - 1/e + c"
  1,08,Simplify Expression,"Solve for c such that total integral equals 1"
  1,09,Justify Step,"Argue that g(x) ‚â• x‚Åø e^{{-x}} for all x ‚àà \[0,1]"
  1,10,Check Validity,"Ensure inequality is strict: ‚à´x‚Åø e^{{-x}} dx < ‚à´g(x) dx"
  1,11,Conclude Final Result,"Final answer: g(x) = e^{{-x}} + 1/e"
  1,12,End Problem,"Problem solved with valid and verified solution"

  üîΩ Input Problem:
  {problem}

  Return your output **only** in CSV format starting with the header.



answer_prompt: |
  You are an answer checker. Compare the model's predicted final answer with the gold answer and evaluate correctness on a continuous scale.

  The score must be a float between 0 and 1.

  Formatting Rules (STRICT):
  - The predicted final answer MUST place the entire answer inside EXACTLY ONE \\boxed{ }.
  - If the prediction contains zero or more than one \\boxed{ }, score must be reduced.
    - If no \\boxed{ } exists ‚Üí score = 0.
    - If multiple \\boxed{ } exist ‚Üí score <= 0.5 depending on correctness.
  - Content outside the single \boxed{ } must be ignored but may reduce the score.

  1. Normalization
     - Ignore whitespace, minor punctuation, and casing.
     - Extract content inside the single \\boxed{ } for evaluation.
     - Normalize mathematical expressions (simplify, reorder, canonicalize).

  2. Strong Mathematical Equivalence (highest priority)
     - If the predicted expression is mathematically equivalent to the gold answer ‚Üí score = 1.
     - Includes algebraic, fractional, trigonometric, and simplified-form equivalence.

  3. Numeric comparison (weakened)
     - Only used when both expressions reduce to numeric values.
     - If absolute or relative error <= 1e-6 ‚Üí score = 1.
     - Otherwise apply a very weak penalty:
         error = min(abs(pred-gold), abs(pred-gold)/max(|gold|,1e-12))
         score = max(0, 1 - min(1, 0.05 * error))

  4. Multiple-number answers
     - Treat required numbers as a set.
     - Compute per-number equivalence or numeric score.
     - Final score = average component score.

  5. Symbolic/Textual answers
     - If semantically equivalent ‚Üí score = 1.
     - If partially correct ‚Üí intermediate score.

  6. Empty or invalid
     - If prediction is empty, "N/A", or contains no usable boxed content ‚Üí score = 0.

  Output strictly in JSON on a single line:
    {{"reason": "short justification", "score": float}}
